<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UTM Campaign Popup</title>
    <script>
        // Function to save 'utm_campaign' from URL to local storage
        function saveUtmCampaign() {
            const urlParams = new URLSearchParams(window.location.search);
            
            // Check if 'utm_campaign' parameter exists in the URL
            if (urlParams.has('utm_campaign')) {
                const utmCampaignValue = urlParams.get('utm_campaign');
                
                // Check if the campaign is already saved in localStorage
                let storedCampaign = localStorage.getItem('utm_campaign');
                let counter = parseInt(localStorage.getItem('utm_campaign_counter')) || 0;

                // If the stored campaign is different or doesn't exist, reset counter
                if (storedCampaign !== utmCampaignValue) {
                    localStorage.setItem('utm_campaign', utmCampaignValue);
                    localStorage.setItem('utm_campaign_counter', 0);  // Set counter to 0 for new campaign
                    console.log('New UTM Campaign saved:', utmCampaignValue);
                } else {
                    // If the same campaign exists, increment the counter
                    localStorage.setItem('utm_campaign_counter', counter + 1);
                    console.log('UTM Campaign counter incremented:', counter + 1);
                }
            }
        }

        // Function to check local storage and show the pop-up if the counter is above 0
        function showPopupIfCampaignExists() {
            const utmCampaignValue = localStorage.getItem('utm_campaign');
            const counter = parseInt(localStorage.getItem('utm_campaign_counter')) || 0;

            // Show the pop-up only if the counter is greater than 0
            if (utmCampaignValue && counter > 0) {
                alert(`Hi ${utmCampaignValue} employee, it’s great to see you again! You’ve been selected for a free beer with us. Just fill in the form, and our team will get back to you.`);
            }
        }

        // Run functions on page load
        document.addEventListener("DOMContentLoaded", function() {
            saveUtmCampaign();  // Check and save UTM campaign and counter
            showPopupIfCampaignExists();  // Show the popup if conditions are met
        });
    </script>
</head>
<body>
    <h1>Welcome to Our Website!</h1>
    <p>Explore our offers and get to know us better.</p>
    <!-- Rest of your website content -->

    <!-- Example form placeholder -->
    <form id="contact-form" style="margin-top: 20px;">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>
        
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>
        
        <button type="submit">Submit</button>
    </form>
</body>
</html>
